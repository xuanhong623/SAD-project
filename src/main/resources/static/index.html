<!doctype html>
<!-- 單頁式應用：航班延誤備援方案 + Demo 付款流程 -->
<html lang="zh-Hant">

<head>
    <!-- 基本編碼與 RWD 設定 -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>飛常順｜主頁</title>

    <!-- 外部樣式檔 -->
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="wrap">
        <div class="card">
            <!-- =========================
                 區塊 1：登入頁面
                 ========================= -->
            <div id="loginSection">
                <h1>飛常不順｜登入</h1>

                <!-- 帳號輸入列 -->
                <div class="row" style="margin-bottom:12px;">
                    <label style="min-width:80px;">帳號</label>
                    <!-- Demo 預設值 demo -->
                    <input id="username" type="text" value="demo" style="flex:1;max-width:200px;" />
                </div>

                <!-- 密碼輸入列 -->
                <div class="row" style="margin-bottom:12px;">
                    <label style="min-width:80px;">密碼</label>
                    <!-- Demo 預設值 1234 -->
                    <input id="password" type="password" value="1234" style="flex:1;max-width:200px;" />
                </div>

                <!-- 登入按鈕與提示 -->
                <button id="loginBtn">登入</button>
                <div class="status" id="loginStatus">Demo 帳號：demo / 1234</div>
            </div>

            <!-- =========================
                 區塊 2：航班資料與飯店資料設定
                 ========================= -->
            <div id="profileSection" style="display:none;">
                <h1>設定航班與飯店資料</h1>

                <!-- 返回登入按鈕 -->
                <div class="row" style="margin-bottom:12px; justify-content:flex-end;">
                    <button id="backToLoginFromProfile" type="button">返回登入</button>
                </div>

                <!-- 姓名 -->
                <div class="row" style="margin-bottom:12px;">
                    <label style="min-width:80px;">姓名</label>
                    <input id="profileFullName" type="text" style="flex:1;max-width:260px;" />
                </div>

                <!-- 飯店名稱 -->
                <div class="row" style="margin-bottom:12px;">
                    <label style="min-width:80px;">飯店名稱</label>
                    <input id="profileHotelName" type="text" style="flex:1;max-width:260px;" />
                </div>

                <!-- 飯店地址 -->
                <div class="row" style="margin-bottom:12px;">
                    <label style="min-width:80px;">飯店地址</label>
                    <input id="profileHotelAddress" type="text" style="flex:1;max-width:260px;" />
                </div>

                <!-- 綁定航班 ID -->
                <div class="row" style="margin-bottom:12px;">
                    <label style="min-width:80px;">綁定航班 ID</label>
                    <input id="profileFlightId" type="number" min="1" style="flex:1;max-width:120px;" />
                </div>

                <!-- 儲存設定 -->
                <button id="profileSaveBtn">儲存資料</button>
                <div class="status" id="profileStatus">請輸入您的航班與飯店資料</div>
            </div>

            <!-- =========================
                 區塊 3：主頁（顯示方案列表）
                 ========================= -->
            <div id="mainSection" style="display:none;">
                <!-- 標題列：主標題 + 返回登入 -->
                <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:8px;">
                    <h1 style="margin-bottom:0;">飛常不順｜主頁</h1>
                    <!-- 主頁返回登入按鈕 -->
                    <button id="backToLoginFromMain" type="button">返回登入</button>
                </div>

                <!-- 使用者 / 航班資訊 banner -->
                <div class="banner" id="userBanner">
                    <div id="userInfo">使用者資訊載入中…</div>
                </div>

                <!-- 狀態 grid：航班狀態 / 方案筆數 / 上次更新時間 -->
                <div class="grid">
                    <div>
                        <div class="k">航班狀態</div>
                        <div class="v" id="flightStatus">未知</div>
                    </div>
                    <div>
                        <div class="k">方案筆數</div>
                        <div class="v" id="planCount">0</div>
                    </div>
                    <div>
                        <div class="k">上次更新</div>
                        <div class="v" id="lastUpdated">—</div>
                    </div>
                </div>

                <!-- 價格拉桿：設定最高可接受價格 -->
                <div class="row" style="margin-top:16px;">
                    <label style="min-width:80px;">價格上限</label>
                    <input id="priceSlider" type="range" min="0" max="20000" step="500" value="20000"
                        style="flex:1;max-width:260px;" />
                    <span class="badge" id="priceLabel">不限</span>
                </div>
                <div class="status" id="priceStatus">拖曳拉桿，可只顯示小於等於指定金額的方案。</div>

                <!-- 方案載入 / 更新狀態 -->
                <div class="status" id="statusText">等待資料…</div>

                <!-- 方案清單表 -->
                <table id="plansTable" style="display:none;">
                    <thead>
                        <tr>
                            <th>方案</th>
                            <th>內容</th>
                            <th>預估抵達</th>
                            <th>費用</th>
                            <th>動作</th>
                        </tr>
                    </thead>
                    <tbody id="plansBody"></tbody>
                </table>
            </div>

            <!-- =========================
                 區塊 4：方案詳情頁
                 ========================= -->
            <div id="planDetailSection" style="display:none;">
                <h1>方案詳情</h1>

                <!-- 方案名稱 -->
                <div class="banner">
                    <div class="k">選擇的方案</div>
                    <div class="v" id="detailPlanType">—</div>
                </div>

                <!-- 預估抵達時間 -->
                <div class="banner">
                    <div class="k">預估抵達時間</div>
                    <div class="v" id="detailArrivalTime">—</div>
                </div>

                <!-- 總費用 -->
                <div class="banner">
                    <div class="k">總費用</div>
                    <div class="v" id="detailCost">—</div>
                </div>

                <!-- 方案內容 -->
                <div class="banner">
                    <div class="k">方案內容</div>
                    <pre id="detailContent" style="margin:0;font-size:14px;white-space:pre-wrap;">—</pre>
                </div>

                <!-- 按鈕：返回主頁 / 進入付款 -->
                <div class="row" style="margin-top:16px;justify-content:space-between;">
                    <button id="backToMainFromDetail" type="button">返回主頁</button>
                    <button id="goToPaymentBtn" type="button">進入付款</button>
                </div>
            </div>

            <!-- =========================
                 區塊 5：付款頁面（模擬綠界信用卡）
                 ========================= -->
            <div id="paymentSection" style="display:none;">
                <h1>信用卡付款（Demo）</h1>

                <!-- 付款表單區 -->
                <div id="paymentFormArea">
                    <!-- 訂單資訊 -->
                    <div class="banner">
                        <div class="k">訂單資訊</div>
                        <div id="payOrderInfo" class="v">—</div>
                    </div>

                    <!-- 應付金額 -->
                    <div class="banner">
                        <div class="k">應付金額</div>
                        <div class="v" id="payAmount">—</div>
                    </div>

                    <!-- Demo 提示文字 -->
                    <div class="status" style="margin-top:16px;">
                        以下為模擬一般綠界（ECPay）信用卡付款頁面，實際串接時會導向綠界正式頁面。
                    </div>

                    <!-- 信用卡欄位 -->
                    <div style="margin-top:16px;">
                        <!-- 卡號 -->
                        <div class="row" style="margin-bottom:12px;">
                            <label class="input-label">信用卡卡號</label>
                            <input id="payCardNumber" type="text" inputmode="numeric" maxlength="19"
                                placeholder="**** **** **** ****" style="flex:1;max-width:260px;" />
                        </div>
                        <div class="field-note">請輸入 16 碼信用卡號（Demo，不送出真實資料）。</div>

                        <!-- 有效期限 -->
                        <div class="row" style="margin:12px 0;">
                            <label class="input-label">有效期限</label>
                            <input id="payCardExpiry" type="text" placeholder="MM/YY" style="flex:1;max-width:120px;" />
                        </div>

                        <!-- 安全碼 -->
                        <div class="row" style="margin:12px 0;">
                            <label class="input-label">安全碼</label>
                            <input id="payCardCvv" type="text" inputmode="numeric" maxlength="4" placeholder="CVV"
                                style="flex:1;max-width:120px;" />
                        </div>

                        <!-- 持卡人姓名 -->
                        <div class="row" style="margin:12px 0;">
                            <label class="input-label">持卡人姓名</label>
                            <input id="payCardHolder" type="text" placeholder="CARD HOLDER NAME"
                                style="flex:1;max-width:260px;" />
                        </div>
                    </div>

                    <!-- 付款表單底部功能 -->
                    <div class="row" style="margin-top:16px;justify-content:space-between;">
                        <button id="backToDetailFromPayment" type="button">返回方案詳情</button>
                        <button id="paySubmitBtn" type="button">確認付款（Demo）</button>
                    </div>

                    <div class="status" id="payStatus">此為示範畫面，不會真的進行扣款。</div>
                </div>

                <!-- 付款結果區（Demo 成功畫面） -->
                <div id="paymentResultArea" style="display:none;margin-top:16px;">
                    <div class="banner">
                        <div class="k">付款狀態</div>
                        <div class="v" id="payResultStatus">付款成功，感謝您的使用。</div>
                    </div>

                    <div class="banner">
                        <div class="k">方案名稱</div>
                        <div class="v" id="payResultPlanType">—</div>
                    </div>

                    <div class="banner">
                        <div class="k">預估抵達時間</div>
                        <div class="v" id="payResultArrivalTime">—</div>
                    </div>

                    <div class="banner">
                        <div class="k">付款金額</div>
                        <div class="v" id="payResultCost">—</div>
                    </div>

                    <div class="banner">
                        <div class="k">方案內容</div>
                        <pre id="payResultContent" style="margin:0;font-size:14px;white-space:pre-wrap;">—</pre>
                    </div>

                    <!-- 取消方案 / 返回登入 -->
                    <div class="row" style="margin-top:16px;justify-content:space-between;">
                        <button id="cancelPlanFromPaymentResult" type="button">取消此方案</button>
                        <button id="backToMainFromPaymentResult" type="button">返回登入</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 外部腳本檔：負責所有前端邏輯 -->
    <script src="app.js"></script>
</body>

</html>